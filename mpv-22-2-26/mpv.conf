


# Optimized shaders for lower-end GPU: Mode A (Fast)
glsl-shaders="~~/shaders/Anime4K_Clamp_Highlights.glsl:~~/shaders/Anime4K_Restore_CNN_M.glsl:~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl:~~/shaders/Anime4K_AutoDownscalePre_x2.glsl:~~/shaders/Anime4K_AutoDownscalePre_x4.glsl:~~/shaders/Anime4K_Upscale_CNN_x2_S.glsl"
#============================================
# MPV Configuration
# ============================================

# ===== LOGGING (for debugging, disable later) =====
#msg-level=all=warn                # Less verbose logging
#log-file=~/.config/mpv/mpv.log    # Enable only for debugging


vo=gpu-next
gpu-context=wayland

# Profile for quality (balanced for battery)
profile=fast                        # Use 'fast' instead of 'gpu-hq' for battery
scale=bilinear                      # Fast scaling, less battery drain
cscale=bilinear                     # Fast chroma scaling
dscale=bilinear                     # Fast downscaling
video-sync=audio                    # Sync to audio, less CPU intensive

# ===== DISPLAY & WINDOW =====
fullscreen=yes
border=no
keep-open=no                       # Keep window open after playback
ontop=yes
geometry=50%:50%                    # Center window at 50% screen size
autofit-larger=90%x80%              # Max window size
autofit-smaller=30%x30%             # Min window size
cursor-autohide=1000                # Hide cursor after 1 second

# ===== AUDIO =====
ao=pipewire,pulse                   # PipeWire first, ALSA fallback
audio-channels=stereo               # Force stereo (less CPU than upmixing)
volume=80
volume-max=100
audio-file-auto=fuzzy               # Auto-load external audio files

# ===== SUBTITLES =====
slang=en,eng,english
sub-auto=fuzzy                      # Auto-load external subs
sub-file-paths=sub:subtitles:subs:Subs:Subtitles  # Sub search paths
alang=jp,jpn,japanese,en,eng,english                # Audio language priority

# Subtitle styling (clean and readable)
sub-font='Noto Sans'
sub-font-size=48
sub-color='#FFFFFFFF'
sub-border-color='#000000'
sub-border-size=2.5
sub-shadow-offset=1
sub-shadow-color='#33000000'
sub-margin-y=50

# ===== PLAYBACK =====
save-position-on-quit=yes           # Resume playback position
watch-later-options=start,volume,sub-scale  # Save these params
loop-playlist=no                    # Don't loop playlist by default
loop-file=no                        # Don't loop single file

# ===== SCREENSHOT =====
screenshot-format=png
screenshot-png-compression=7
screenshot-template='~/Pictures/MPV/%F-%P'
screenshot-directory=~/Pictures/MPV

# ===== CACHE & NETWORK =====
cache=yes
demuxer-max-bytes=150M              # 150MB cache for streaming
demuxer-max-back-bytes=50M          # 50MB backward cache

# ===== YOUTUBE-DL / YT-DLP =====
ytdl-format=bestvideo[height<=360]+bestaudio/best[height<=360]/best
script-opts=ytdl_hook-ytdl_path=yt-dlp

# ===== OSD & UI =====
osd-level=1                         # Show minimal OSD
osd-duration=2000                   # OSD timeout 2 seconds
osd-font='Noto Sans'
osd-font-size=32
osd-color='#FFFFFFFF'
osd-border-color='#000000'
osd-bar-align-y=-1                  # Bottom OSD bar
osd-bar-w=80
osd-bar-h=2

# ===== SCREENSHOT =====
taskbar-progress=no                # No taskbar progress (not needed on Linux)
stop-screensaver=yes                # Prevent screen blanking

# ===== INPUT =====
input-default-bindings=no          # Keep default bindings
input-builtin-bindings=no          # Keep built-in bindings

# ===== PROFILES =====
# Audio-only profile
[audio]
video=no
term-osd-bar=yes

# Protocol-specific profiles
[protocol.http]
cache=yes
hls-bitrate=max
user-agent='Mozilla/5.0'
network-timeout=10

[protocol.https]
profile=protocol.http

[protocol.ytdl]
profile=protocol.http
ytdl-raw-options=format-sort=res:360

# ===== FILE TYPE ASSOCIATIONS =====
# Auto-profiles based on file extension

[extension.gif]
loop-file=inf

[extension.webm]
loop-file=inf

[extension.mp3]
profile=audio

[extension.flac]
profile=audio

[extension.m4a]
profile=audio

[extension.opus]
profile=audio

[extension.ogg]
profile=audio
